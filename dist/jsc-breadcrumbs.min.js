/**
 * Easy to use breadcrumbs for AngularJS
 * @version v1.1.3 - 2015-08-04 * @link https://github.com/jacobscarter/jsc-breadcrumbs
 * @author Jacob Carter <jacob@ieksolutions.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
var jscBreadcrumbs=angular.module("jscBreadcrumbs",["templates-jscBreadcrumbs"]);jscBreadcrumbs.directive("jscBreadcrumbs",["$rootScope","$log","$state","$stateParams","JSCBreadcrumbs",function(a,b,c,d,e){return{restrict:"E",scope:{backbutton:"=",breadcrumbtrail:"="},replace:!0,templateUrl:"template.html",link:function(b,f,g){function h(a){sessionStorage.setItem("jscBreadcrumbs",JSON.stringify(a))}function i(){j=JSON.parse(sessionStorage.getItem("jscBreadcrumbs"))}b.backButtonShow=!1,b.breadcrumbTrailShow=!1,b.backbutton&&(b.backButtonShow=!0),b.breadcrumbtrail&&(b.breadcrumbTrailShow=!0);var j;b.trailArray=[];j=sessionStorage.getItem("jscBreadcrumbs")&&angular.isArray(JSON.parse(sessionStorage.getItem("jscBreadcrumbs")))?JSON.parse(sessionStorage.getItem("jscBreadcrumbs")):[],d.breadcrumbs&&d.breadcrumbs.doNotShow===!0&&(e.breadcrumbData.hide=!0),b.hide=e.breadcrumbData.hide,a.$on("$stateChangeStart",function(a,c,d,f,g){if(sessionStorage.getItem("jscBreadcrumbs")&&angular.isArray(JSON.parse(sessionStorage.getItem("jscBreadcrumbs")))&&(j=JSON.parse(sessionStorage.getItem("jscBreadcrumbs"))),c.data&&c.data.breadcrumbs&&c.data.breadcrumbs.doNotShow===!0?(e.breadcrumbData.hide=!0,b.hide=e.breadcrumbData.hide):(e.breadcrumbData.hide=!1,b.hide=e.breadcrumbData.hide),f.data&&f.data.breadcrumbs&&f.data.breadcrumbs.name)var h=f.data.breadcrumbs.name;else var h=f.name;f.name.length>0&&(j.push({name:h,state:f,params:g}),firstLoop=!1),f.data&&f.data.breadcrumbs&&f.data.breadcrumbs.doNotStore&&b.breadcrumbPop(),c.data&&c.data.breadcrumbs&&c.data.breadcrumbs.reset&&(j.length=0),sessionStorage.setItem("jscBreadcrumbs",JSON.stringify(j)),b.trailArray=j,0===j.length&&(e.breadcrumbData.hide=!0,b.hide=!0)}),b.breadcrumbPop=function(){j.pop(),h(j)},b.backButton=function(){i();var a=j[j.length-1];c.go(a.state.name,a.params),j.splice(j.length-2,2),sessionStorage.setItem("jscBreadcrumbs",JSON.stringify(j)),0===j.length&&(e.breadcrumbData.hide=!0,b.hide=e.breadcrumbData.hide=!0,sessionStorage.removeItem("jscBreadcrumbs"))},b.breadcrumbClick=function(a){c.go(j[a].state.name,j[a].params),j.splice(j.length-2,2),sessionStorage.setItem("jscBreadcrumbs",JSON.stringify(j)),0===j.length&&(e.breadcrumbData.hide=!0,b.hide=e.breadcrumbData.hide=!0,sessionStorage.removeItem("jscBreadcrumbs"))}}}}]),angular.module("templates-jscBreadcrumbs",["template.html"]),angular.module("template.html",[]).run(["$templateCache",function(a){a.put("template.html",'<div class="jscbreadcrumbs">\n	<div class="back-button" ng-hide="hide" ng-click="backButton()" ng-if="backButtonShow">\n		<a>BACK</a>\n	</div>\n	<div class="breadcrumb-trail" ng-if="breadcrumbTrailShow" ng-hide="hide">\n		<ul>\n			<li ng-repeat="item in trailArray" ng-click="breadcrumbClick($index)">{{item.name}} /</li>\n		</ul>\n	</div>\n</div>')}]),jscBreadcrumbs.factory("JSCBreadcrumbs",["$rootScope","$state","$log","$timeout",function(a,b,c,d){var e=[],f={};f.hide=!0;var g=function(){e=JSON.parse(sessionStorage.getItem("jscBreadcrumbs")),e.pop(),sessionStorage.setItem("jscBreadcrumbs",JSON.stringify(e))},h=function(){return e=JSON.parse(sessionStorage.getItem("jscBreadcrumbs"))};return{breadcrumbs:h,breadcrumbsPop:g,breadcrumbData:f}}]);